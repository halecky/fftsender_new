СОСТАВНЫЕ ТИПЫ ДАННЫХ
=====================

добавил п.6
подправил пункты IV.2 и V.2


1.СТРУКТУРА СТАНДАРТНОГО ЗАПРОСА
--------------------------------

1.1.Признак запроса
размер: 1 байт
тип: беззнаковое целое
значение: 0x5A
1.2.Номер запроса
размер: 1 байт
тип: беззнаковое целое
значения: 0 .. 255, счётчик запросов
1.3.Код функции
размер: 1 байт
тип: беззнаковое целое
значения: 0x00 - для операции I."Получение состояния радара"
  0x01 - для операции II."Получение данных измерения"
  0x02 - для операции III."Управление режимом измерения"
  0x03 - для операции IV."Получение порогов клаттера"
  0x04 - для операции V."Установка порогов клаттера"

2.СТРУКТУРА СТАНДАРТНОГО ОТВЕТА
-------------------------------

struct {
unsigned char response_tag;
unsigned char request_no;
unsigned char function_code;
unsigned char return_value;
}

2.1.Признак ответа
размер: 1 байт
тип: беззнаковое целое
значения: 0xA5
2.2.Номер ответа
размер: 1 байт
тип: беззнаковое целое
значение:	соответствует значению поля 1.2 в сообщении запроса (I,II,IV,запрос) или 
в поле "Заголовок" сообщения запроса (III,V,запрос,1)
2.3.Код функции
размер: 1 байт
тип: беззнаковое целое
значение:	соответствует значению поля 1.3 в сообщении запроса (I,II,IV,запрос) или 
в поле "Заголовок" сообщения запроса (III,V,запрос,1)
2.4.Код результата выполнения
размер: 1 байт
тип: беззнаковое целое
значения:	0x00 - успех
0x01 - неподдерживаемый запрос
0x02 - сервер занят
0xFF - неспецифицируемая ошибка

3.СТРУКТУРА СЛОВА СОСТОЯНИЯ РАДАРА
----------------------------------

struct {
unsigned char condition                : 1;
unsigned char readiness                : 1;
unsigned char is_measuring    : 1;
unsigned char last_measurement_success : 1;
unsigned char have_unread_measurement  : 1;
unsigned char _unused_                 : 3;
}

3.1.Исправность радара 
размер: 1 бит
тип: битовое поле
значение:	0, если радар исправен
1, если радар неисправен
3.2.Готовность радара
размер: 1 бит
тип: битовое поле
значение:	0, если радар готов к работе 
1, если радар не готов к работе из-за ухода параметров за допустимые пределы 
3.3.Состояние работы в режиме измерения
размер: 1 бит
тип: битовое поле
значение:	0, если радар не выполняет измерение 
1, если радар находится в режиме непрерывного измерения 
3.4.Успешность последнего измерения
размер: 1 бит
тип: битовое поле
значение:	0, если измерение успешно
1, если измерение не успешно

3.5.Наличие несчитанного результата измерения
размер: 1 бит
тип: битовое поле
значение:	0, если данные последнего измерения уже были запрошены
1, если данные последнего измерения ещё не были запрошены 


4.СТРУКТУРА ОПИСАНИЯ ЦЕЛИ
-------------------------

4.1.Уточненное знаковое значение скорости
размер: 8 байт
тип: знаковое с плавающей точкой
значение: скорость движения цели в км/ч с максимальной точностью
4.2.Уточненное значение расстояния до цели:
размер: 8 байт
тип: знаковое с плавающей точкой
значение: расстояние до цели в метрах с максимальной точностью
4.3.Состояние детектирования скорости
размер: 1 байт
тип: беззнаковое целое
значения: 0 - значение скорости в допустимых пределах
  1 - значение скорости ниже минимальной границы
  2 - значение скорости выше максимальной границы
  3 - значение скорости недостоверно

5.СТРУКТУРА ТОЧКИ РАЗВЕРТКИ
---------------------------
5.1.Значение мощности сигнала
размер: 4 байта
тип: знаковое с фиксированной точкой
значения: 0 .. -90, мощность сигнала на входе приёмника в дБм с точностью до 3 знака после запятой (dd.ddd)
5.2.Состояние детектирования мощности
размер: 1 байт
тип: беззнаковое целое
значения: 0 - значение мощности в допустимых пределах 
  1 - значение мощности ниже минимальной границы
  2 - значение мощности выше максимальной границы
  3 - значение мощности недостоверно

ОПЕРАЦИИ
========

I.Получение состояния радара
----------------------------

ЗАПРОС
тип: СТРУКТУРА СТАНДАРТНОГО ЗАПРОСА

ОТВЕТ
1.Заголовок
тип: СТРУКТУРА СТАНДАРТНОГО ОТВЕТА
2.Слово состояния радара
тип: СТРУКТУРА СЛОВА СОСТОЯНИЯ РАДАРА
3.Код неисправности
размер: 1 байт
тип: беззнаковое целое
значения: 0x00 .. 0xFF
4.Массив значений температур
размер элемента: 1 байт
тип элемента: знаковое целое
значения элемента: -40 .. +50, градусы Цельсия
количество элементов: 3
5.Массив значений токов потребления
размер элемента: 1 байт
тип элемента: беззнаковое целое
значения элемента:
количество элементов: 3
6.Массив значений напряжений питания
размер элемента: 1 байт
тип элемента: знаковое целое
значения элемента:
количество элементов: 4

II.Получение данных измерения
-----------------------------

ЗАПРОС
тип: СТРУКТУРА СТАНДАРТНОГО ЗАПРОСА

ОТВЕТ
1.Заголовок
тип: СТРУКТУРА СТАНДАРТНОГО ОТВЕТА
2.Номер измерения
размер: 1 байт
тип: беззнаковое целое
значение: счётчик
3.Счётчик времени с момента последнего измерения (от свипа вверх до момента передачи данных)
размер: 2 байта
тип: беззнаковое целое
значение: 0 .. 65535, количество миллисекунд прошедшее с момента последнего измерения
4.Массив точек развертки вверх
тип элемента: СТРУКТУРА ТОЧКИ РАЗВЕРТКИ
количество элементов: 1024
5.Массив точек развертки вниз
тип элемента: СТРУКТУРА ТОЧКИ РАЗВЕРТКИ
количество элементов: 1024
6.Количество найденных целей
размер: 1 байт        
тип: беззнаковое целое
значения: N = 0 .. 255
7.Массив структур описаний целей
тип элемента: СТРУКТУРА ОПИСАНИЯ ЦЕЛИ
количество элементов: N


III.Управление режимом измерения
---------------------------------

ЗАПРОС
1.Заголовок
тип: СТРУКТУРА СТАНДАРТНОГО ЗАПРОСА
2.Управление
размер: 1 байт
тип: беззнаковое целое
значения:	0 - выключить режим непрерывного измерения
1 - включить режим непрерывного измерения
3.Время нахождения в режиме непрерывного измерения
размер: 2 байта
тип: беззнаковое целое
значения: 0 .. 65535, время в секундах

ОТВЕТ
1.Заголовок
тип: СТРУКТУРА СТАНДАРТНОГО ОТВЕТА
2.Слово состояния радара
тип: СТРУКТУРА СЛОВА СОСТОЯНИЯ РАДАРА


IV.Получение порогов клаттера:
------------------------------

ЗАПРОС
тип: СТРУКТУРА СТАНДАРТНОГО ЗАПРОСА

ОТВЕТ
1.Заголовок
тип: СТРУКТУРА СТАНДАРТНОГО ОТВЕТА
2.Массив точек пороговой кривой:
размер элемента: 4 байта
тип элемента: знаковое с фиксированной точкой
значения элемента: 0 .. -90, порог по мощности сигнала на входе приёмника в дБм с точностью 
   до 3 знака после запятой (dd.ddd) 
количество элементов: 1024, для каждой точки на расстояниях от 0 до 512м с шагом 0.5м


V.Установка порогов клаттера:
-------------------------------

ЗАПРОС
1.Заголовок
тип: СТРУКТУРА СТАНДАРТНОГО ЗАПРОСА
2.Массив точек пороговой кривой:
размер элемента: 4 байта
тип элемента: знаковое с фиксированной точкой
значения элемента: 0 .. -90, порог по мощности сигнала на входе приёмника в дБм с точностью 
   до 3 знака после запятой (dd.ddd) 
количество элементов: 1024, для каждой точки на расстояниях от 0 до 512м с шагом 0.5м

ОТВЕТ
эквивалентен IV,ответ



ПРИМЕЧАНИЯ
==========
Порядок байтов в элементах с размером > 1 байта соответствует сетевому (little-endian,старший вперед)